{"ast":null,"code":"import React,{useState,useEffect}from'react';import Container from'react-bootstrap/Container';import Nav from'react-bootstrap/Nav';import Navbar from'react-bootstrap/Navbar';import Offcanvas from'react-bootstrap/Offcanvas';import Button from'react-bootstrap/Button';import{useNavigate}from'react-router-dom';import axios from'axios';import\"./navBar.css\";// Ensure this CSS file exists and is correctly applied\nimport Login from\"./login.jsx\";// Adjust the path if necessary\nimport Register from\"./Register.jsx\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function NavBar1(){const[loginShow,setLoginShow]=useState(false);const[registerShow,setRegisterShow]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(false);const[userType,setUserType]=useState('');const navigate=useNavigate();const storedUser=JSON.parse(localStorage.getItem('user'));useEffect(()=>{// Check if the user is already logged in\nconst checkLoginStatus=async()=>{try{const response=await axios.get('https://hospital-gijl.onrender.com/api/auth/checkAuth',{withCredentials:true// Ensure cookies are sent\n});if(response.data.auth&&response.data.isLoggedIn){setIsLoggedIn(true);setUserType(response.data.userType);}}catch(error){console.error('Error checking login status',error);}};checkLoginStatus();},[]);const handleLogout=async()=>{try{// Make a POST request to your logout endpoint\nawait axios.post('https://hospital-gijl.onrender.com/api/auth/logout',{},{withCredentials:true// Ensure cookies are sent\n});// Delete the 'access_token' cookie\ndocument.cookie='access_token=; max-age=0; domain=localhost; path=/';localStorage.removeItem('user');// Update local state to reflect logout\nsetIsLoggedIn(false);setUserType('');// Navigate the user back to the homepage or desired route\nnavigate('/');}catch(error){console.error('Error during logout',error);}};const handleLoginSuccess=userType=>{setIsLoggedIn(true);setUserType(userType);setLoginShow(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[['lg'].map(expand=>/*#__PURE__*/_jsx(Navbar,{expand:expand,className:\"bg-transparent mb-3 fixed-top navtext\",children:/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"/\",children:\"Hospital\"}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"offcanvasNavbar-expand-\".concat(expand)}),/*#__PURE__*/_jsxs(Navbar.Offcanvas,{id:\"offcanvasNavbar-expand-\".concat(expand),\"aria-labelledby\":\"offcanvasNavbarLabel-expand-\".concat(expand),placement:\"end\",children:[/*#__PURE__*/_jsx(Offcanvas.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Offcanvas.Title,{id:\"offcanvasNavbarLabel-expand-\".concat(expand),children:\"Hospital\"})}),/*#__PURE__*/_jsx(Offcanvas.Body,{children:/*#__PURE__*/_jsxs(Nav,{className:\"justify-content-end flex-grow-1 pe-3 d-flex\",children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(Nav.Link,{href:\"/Appointment\",children:\"Appointment\"}),/*#__PURE__*/_jsx(Nav.Link,{href:\"/abort\",children:\"About\"}),isLoggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav.Link,{href:storedUser.isAdmin?'/admin':userType==='doctor'?'/doctor':'/dashboard',children:storedUser.username}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",onClick:()=>setLoginShow(true),children:\"Login\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",onClick:()=>setRegisterShow(true),children:\"Sign Up\"})]})]})})]})]})},expand)),/*#__PURE__*/_jsx(Login,{show:loginShow,onHide:()=>setLoginShow(false),onLoginSuccess:handleLoginSuccess}),/*#__PURE__*/_jsx(Register,{show:registerShow,onHide:()=>setRegisterShow(false)})]});}export default NavBar1;","map":{"version":3,"names":["React","useState","useEffect","Container","Nav","Navbar","Offcanvas","Button","useNavigate","axios","Login","Register","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NavBar1","loginShow","setLoginShow","registerShow","setRegisterShow","isLoggedIn","setIsLoggedIn","userType","setUserType","navigate","storedUser","JSON","parse","localStorage","getItem","checkLoginStatus","response","get","withCredentials","data","auth","error","console","handleLogout","post","document","cookie","removeItem","handleLoginSuccess","children","map","expand","className","fluid","Brand","href","Toggle","concat","id","placement","Header","closeButton","Title","Body","Link","isAdmin","username","variant","onClick","show","onHide","onLoginSuccess"],"sources":["C:/Users/KIRUBAKARAN/OneDrive/Documents/Internship/client/src/component/navbar/NavBar1.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Offcanvas from 'react-bootstrap/Offcanvas';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport \"./navBar.css\"; // Ensure this CSS file exists and is correctly applied\r\nimport Login from \"./login.jsx\"; // Adjust the path if necessary\r\nimport Register from \"./Register.jsx\";\r\n\r\nfunction NavBar1() {\r\n  const [loginShow, setLoginShow] = useState(false);\r\n  const [registerShow, setRegisterShow] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [userType, setUserType] = useState('');\r\n  const navigate = useNavigate();\r\n  const storedUser = JSON.parse(localStorage.getItem('user'));\r\n  useEffect(() => {\r\n\r\n    // Check if the user is already logged in\r\n    const checkLoginStatus = async () => {\r\n      try {\r\n        const response = await axios.get('https://hospital-gijl.onrender.com/api/auth/checkAuth', {\r\n          withCredentials: true // Ensure cookies are sent\r\n        });\r\n        if (response.data.auth && response.data.isLoggedIn) {\r\n          setIsLoggedIn(true);\r\n          setUserType(response.data.userType);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error checking login status', error);\r\n      }\r\n    };\r\n\r\n    checkLoginStatus();\r\n  }, []);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      // Make a POST request to your logout endpoint\r\n      await axios.post('https://hospital-gijl.onrender.com/api/auth/logout', {}, {\r\n        withCredentials: true // Ensure cookies are sent\r\n      });\r\n\r\n      // Delete the 'access_token' cookie\r\n      document.cookie = 'access_token=; max-age=0; domain=localhost; path=/';\r\n       \r\n      localStorage.removeItem('user');\r\n\r\n      // Update local state to reflect logout\r\n      setIsLoggedIn(false);\r\n      setUserType('');\r\n\r\n      // Navigate the user back to the homepage or desired route\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error during logout', error);\r\n    }\r\n  };\r\n\r\n  const handleLoginSuccess = (userType) => {\r\n    setIsLoggedIn(true);\r\n    setUserType(userType);\r\n    setLoginShow(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {['lg'].map((expand) => (\r\n        <Navbar key={expand} expand={expand} className=\"bg-transparent mb-3 fixed-top navtext\">\r\n          <Container fluid>\r\n            <Navbar.Brand href=\"/\">Hospital</Navbar.Brand>\r\n            <Navbar.Toggle aria-controls={`offcanvasNavbar-expand-${expand}`} />\r\n            <Navbar.Offcanvas\r\n              id={`offcanvasNavbar-expand-${expand}`}\r\n              aria-labelledby={`offcanvasNavbarLabel-expand-${expand}`}\r\n              placement=\"end\"\r\n            >\r\n              <Offcanvas.Header closeButton>\r\n                <Offcanvas.Title id={`offcanvasNavbarLabel-expand-${expand}`}>\r\n                  Hospital\r\n                </Offcanvas.Title>\r\n              </Offcanvas.Header>\r\n              <Offcanvas.Body>\r\n                <Nav className=\"justify-content-end flex-grow-1 pe-3 d-flex\">\r\n                  <Nav.Link href=\"/\">Home</Nav.Link>\r\n                  <Nav.Link href=\"/Appointment\">Appointment</Nav.Link>\r\n                  <Nav.Link href=\"/abort\">About</Nav.Link>\r\n                  {isLoggedIn ? (\r\n                    <>\r\n                      <Nav.Link href={storedUser.isAdmin ? '/admin' : userType === 'doctor' ? '/doctor' : '/dashboard'}>\r\n                        {storedUser.username}\r\n                      </Nav.Link>\r\n                      <Button variant=\"outline-danger\" onClick={handleLogout}>Logout</Button>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Button variant=\"outline-success\" onClick={() => setLoginShow(true)}>Login</Button>\r\n                      <Button variant=\"outline-success\" onClick={() => setRegisterShow(true)}>Sign Up</Button>\r\n                    </>\r\n                  )}\r\n                </Nav>\r\n              </Offcanvas.Body>\r\n            </Navbar.Offcanvas>\r\n          </Container>\r\n        </Navbar>\r\n      ))}\r\n      <Login\r\n        show={loginShow}\r\n        onHide={() => setLoginShow(false)}\r\n        onLoginSuccess={handleLoginSuccess}\r\n      />\r\n      <Register\r\n        show={registerShow}\r\n        onHide={() => setRegisterShow(false)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NavBar1;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}